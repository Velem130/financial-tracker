# =================================================
#          Supabase PostgreSQL Connection
# =================================================
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://aws-1-eu-west-1.pooler.supabase.com:5432/postgres}
spring.datasource.username=${DATABASE_USERNAME:postgres.ugudbrylybnynbnweeri}
spring.datasource.password=${DATABASE_PASSWORD:Issahmz9Issahmz}
spring.datasource.driver-class-name=org.postgresql.Driver

# =================================================
#          HikariCP Connection Pool (for Supabase)
# =================================================
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=1800000

# =================================================
#          JPA / Hibernate Settings
# =================================================
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# =================================================
#          Server
# =================================================
server.port=8080

# =================================================
#          JWT Configuration
# =================================================
# MUST BE AT LEAST 32 CHARACTERS (256 bits) for HMAC-SHA256
# Here are 3 options - choose ONE:

# Option 1: Long phrase (44 characters)
jwt.secret=${JWT_SECRET:ThisIsMySuperLongSecretKeyForFinanceTrackerDoNotShareItEver2025-2026ExtraChars}

# Option 2: Random mix (36 characters)
# jwt.secret=FinanceTrackerApp2025!@#SecureKeyForJWTIssuesFix$

# Option 3: Simple but long (33 characters)
# jwt.secret=VeryLongSecretKeyForJWTInSpringBootApp2025

# JWT token expiration time in milliseconds (24 hours = 86400000 ms)
jwt.expiration=86400000

# =================================================
#          CORS Configuration
# =================================================
app.cors.allowed-origins=${ALLOWED_ORIGINS:http://localhost:5173}

# =================================================
#          Actuator Configuration
# =================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true

# =================================================
#          Logging (helps with debugging)
# =================================================
logging.level.org.springframework=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.orm.jdbc.bind=TRACE

# =================================================
#          Spring Security (Optional - for development)
# =================================================
# Disable security for testing endpoints (if needed)
# spring.security.user.name=admin
# spring.security.user.password=admin
# spring.security.user.roles=ADMIN

# =================================================
#          Spring DevTools (for hot reload)
# =================================================
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# =================================================
#          Application Specific
# =================================================
# Your app name
spring.application.name=velem

# =================================================
#          Additional Hibernate Settings
# =================================================
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# =================================================
#          CORS Configuration (for frontend access)
# =================================================
# If you have a frontend, uncomment and configure:
# cors.allowed-origins=http://localhost:3000
# cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
# cors.allowed-headers=*
# cors.allow-credentials=true